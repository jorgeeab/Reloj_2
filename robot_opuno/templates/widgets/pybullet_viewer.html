<!-- Widget: PyBullet Visualizer con Controles de CÃ¡mara -->
<div class="control-pair">
    <div class="pair-header">
        <label>VisualizaciÃ³n PyBullet</label>
        <button id="gear_pybullet" type="button" class="gear" title="ConfiguraciÃ³n de visualizaciÃ³n">âš™</button>
    </div>
    <div class="pair-body">
        <!-- Canvas de visualizaciÃ³n -->
        <div id="pybullet_canvas_container" style="width: 100%; max-width: 100%; margin-bottom: 12px;">
            <img id="pybullet_view" alt="VisualizaciÃ³n PyBullet"
                src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
                style="width: 100%; height: auto; border-radius: 8px; background: #1a1a1a; min-height: 400px; object-fit: contain;" />
            <span class="muted small" id="pybullet_status" style="display: block; margin-top: 4px; text-align: center;">
                Cargando visualizaciÃ³n...
            </span>
        </div>

        <!-- Controles de CÃ¡mara - Modo Compacto -->
        <div class="row" style="gap: 8px; margin-bottom: 8px; flex-wrap: wrap;">
            <button id="pb_save_view" type="button" style="flex: 1;">ðŸ’¾ Guardar Vista</button>
            <button id="pb_load_view" type="button" style="flex: 1;">ðŸ“‚ Cargar Vista</button>
            <button id="pb_reset_view" type="button" style="flex: 1;">ðŸ”„ Reset Vista</button>
        </div>

        <!-- Sliders de cÃ¡mara (colapsables) -->
        <details id="pb_camera_details" style="margin-top: 8px;">
            <summary style="cursor: pointer; font-weight: 500; padding: 4px 0;">
                ðŸŽ¥ Controles de CÃ¡mara
            </summary>

            <div style="display: grid; gap: 8px; padding: 8px 0;">
                <!-- Distance -->
                <div class="slider">
                    <label for="pb_distance">Distancia</label>
                    <input type="range" id="pb_distance" min="0.1" max="2" step="0.05" value="0.35">
                    <output id="pb_distance_val">0.35</output>
                </div>

                <!-- Yaw -->
                <div class="slider">
                    <label for="pb_yaw">Yaw (RotaciÃ³n)</label>
                    <input type="range" id="pb_yaw" min="-180" max="180" step="5" value="45">
                    <output id="pb_yaw_val">45Â°</output>
                </div>

                <!-- Pitch -->
                <div class="slider">
                    <label for="pb_pitch">Pitch (InclinaciÃ³n)</label>
                    <input type="range" id="pb_pitch" min="-89" max="89" step="5" value="-25">
                    <output id="pb_pitch_val">-25Â°</output>
                </div>

                <!-- Target X -->
                <div class="slider">
                    <label for="pb_target_x">Target X</label>
                    <input type="range" id="pb_target_x" min="-0.5" max="0.5" step="0.01" value="0">
                    <output id="pb_target_x_val">0.00</output>
                </div>

                <!-- Target Y -->
                <div class="slider">
                    <label for="pb_target_y">Target Y</label>
                    <input type="range" id="pb_target_y" min="-0.5" max="0.5" step="0.01" value="0">
                    <output id="pb_target_y_val">0.00</output>
                </div>

                <!-- Target Z -->
                <div class="slider">
                    <label for="pb_target_z">Target Z</label>
                    <input type="range" id="pb_target_z" min="-0.2" max="0.5" step="0.01" value="0.03">
                    <output id="pb_target_z_val">0.03</output>
                </div>
            </div>
        </details>
    </div>
</div>

<!-- Modal de configuraciÃ³n (si se necesita en el futuro) -->
<div class="modal-card" id="cfg_pybullet" hidden>
    <h3>ConfiguraciÃ³n PyBullet</h3>

    <div class="row" style="gap: 8px; margin-bottom: 12px;">
        <div style="flex: 1;">
            <label for="pb_width">Ancho (px)</label>
            <input type="number" id="pb_width" min="320" max="3840" step="80" value="1280" />
        </div>
        <div style="flex: 1;">
            <label for="pb_height">Alto (px)</label>
            <input type="number" id="pb_height" min="240" max="2160" step="60" value="720" />
        </div>
    </div>

    <button id="pb_apply_size" type="button" style="width: 100%;">Aplicar TamaÃ±o</button>

    <div class="muted small" style="margin-top: 12px;">
        Nota: Cambiar el tamaÃ±o puede afectar el rendimiento.
    </div>
</div>

<script src="/static/js/widgets/pybullet_viewer.js?v=4"></script>